@use '../../styles/props' as props;
@use '../../styles/transitions' as transitions;

bzz-input {
  position: relative;
  display: flex;
  @include props.cursor;
  @include props.bgColor;
  @include props.spacing;
  @include props.width;
  @include props.text;
  @include props.border;
  @include props.transform;
  @include transitions.transition;

  .bzz-input-label {
    display: block;
    @include props.cursor('label_');
    @include props.spacing('label_');
    @include props.text('label_');
    @include props.transform('label_');
  }

  .bzz-input-field {
    flex-grow: 1;
    display: flex;
    @include props.cursor('field_');
    @include props.bgColor('field_');
    @include props.spacing('field_');
    @include props.border('field_');
    @include props.text('field_');
    @include props.transform('field_');
  }

  [bzzPrefix] {
    @include props.spacing('prefix_');
    @include props.transform('prefix_');
  }

  [bzzSuffix] {
    @include props.spacing('suffix_');
    @include props.transform('suffix_');
  }

  &.--optimized-field-border .bzz-input-field {
    @include props.optimizedBorder('field_');
  }

  input {
    flex-grow: 1;
    background-color: transparent;
    border: none;

    &:focus-visible {
      outline: none;
    }
  }

  input::placeholder {
    @include props.text('placeholder_');
    @include props.transform('placeholder_');
    @include transitions.transition;
  }

  &.--optimized-border {
    @include props.optimizedBorder;
    @include transitions.transition;
  }

  &.--label-top     { flex-direction: column; }
  &.--label-bottom  { flex-direction: column-reverse; }
  &.--label-left    { flex-direction: row; }
  &.--label-right   { flex-direction: row-reverse; }

  &.--label-secondary-left .bzz-input-label,
  &.--label-secondary-top .bzz-input-label {
    align-self: start;
  }

  &.--label-secondary-center .bzz-input-label {
    align-self: center;
  }

  &.--label-secondary-right .bzz-input-label,
  &.--label-secondary-bottom .bzz-input-label {
    align-self: end;
  }

  &.--label-floating {
    .bzz-input-label {
      align-self: center;
      position: absolute;
      display: flex;
      align-items: center;

      padding: var(--field_padding);
      padding-top: 0;
      padding-bottom: 0;
      height: 100%;

      font-size: var(--field_text-size);
      line-height: var(--field_text-height);

      border-color: transparent;
      pointer-events: none;
      @include transitions.transition(120ms, transitions.$ease-in);
    }

    label {
      display: block;
      transform-origin: left;
      background: var(--floating-label-color, var(--field_bg-color));
      background: var(--floating-label-color, linear-gradient(0deg, var(--field_bg-color) 0%, var(--field_bg-color) 50%, transparent 50%, transparent 100%));
      padding: 0 var(--label_floating-border-gap, 2px);
      margin: 0 calc(var(--label_floating-border-gap, 2px) * -1);
      @include transitions.transition(120ms, transitions.$ease-in, scale);
    }

    input::placeholder {
      visibility: hidden;
    }

    &[state-labelFloating=true] .bzz-input-label {
      //background-color: red;
      @include transitions.transition(80ms, transitions.$ease-out);

      label {
        scale: var(--label_floating-scale);
        @include transitions.transition(80ms, transitions.$ease-out, scale);
      }

      ~ .bzz-input-field input::placeholder {
        visibility: visible;
      }
    }

    &.--label-floating-always .bzz-input-label{
      transition: none;

      label {
        transition: none;
      }
    }
  }
}

