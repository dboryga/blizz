@use '../../styles/props' as props;
@use '../../styles/transitions' as transitions;

bzz-input {
  position: relative;
  display: flex;
  @include props.cursor('input');
  @include props.bgColor('input');
  @include props.spacing('input');
  @include props.width('input');
  @include props.text('input');
  @include props.border('input');
  @include props.transform('input');
  @include transitions.transition;

  .bzz-input-label {
    display: block;
    @include props.cursor('input-label');
    @include props.spacing('input-label');
    @include props.text('input-label');
    @include props.transform('input-label');
  }

  .bzz-input-field {
    flex-grow: 1;
    display: flex;
    @include props.cursor('input-field');
    @include props.bgColor('input-field');
    @include props.flexSpacing('input-field');
    @include props.border('input-field');
    @include props.text('input-field');
    @include props.transform('input-field');
  }

  [bzzPrefix] {
    @include props.spacing('input-prefix');
    @include props.text('input-prefix');
    @include props.transform('input-prefix');
  }

  [bzzSuffix] {
    @include props.spacing('input-suffix');
    @include props.text('input-suffix');
    @include props.transform('input-suffix');
  }

  &.--optimized-field-border .bzz-input-field {
    @include props.optimizedBorder('input-field');
  }

  input {
    flex-grow: 1;
    background-color: transparent;
    border: none;

    &:focus-visible {
      outline: none;
    }
  }

  input::placeholder {
    @include props.text('input-placeholder');
    @include props.transform('input-placeholder');
    @include transitions.transition;
  }

  &[state-disabled="true"] {
    pointer-events: none;
  }

  &.--optimized-border {
    @include props.optimizedBorder('input');
    @include transitions.transition;
  }

  &.--label-top     { flex-direction: column; }
  &.--label-bottom  { flex-direction: column-reverse; }
  &.--label-left    { flex-direction: row; }
  &.--label-right   { flex-direction: row-reverse; }

  &.--label-secondary-left .bzz-input-label,
  &.--label-secondary-top .bzz-input-label {
    align-self: start;
  }

  &.--label-secondary-center .bzz-input-label {
    align-self: center;
  }

  &.--label-secondary-right .bzz-input-label,
  &.--label-secondary-bottom .bzz-input-label {
    align-self: end;
  }

  &.--label-floating {
    .bzz-input-label {
      align-self: center;
      position: absolute;
      display: flex;
      align-items: center;

      padding: var(--bzz-input-field_padding);
      padding-top: 0;
      padding-bottom: 0;
      height: 100%;

      font-size: var(--bzz-input-field_text-size);
      line-height: var(--bzz-input-field_text-height);

      border-color: transparent;
      pointer-events: none;
      @include transitions.transition(120ms, transitions.$ease-in);
    }

    label {
      display: block;
      transform-origin: left;
      background: var(--floating-label-color, var(--bzz-input-field_bg-color));
      background: var(--floating-label-color, linear-gradient(0deg, var(--bzz-input-field_bg-color) 0%, var(--bzz-input-field_bg-color) 50%, transparent 50%, transparent 100%));
      padding: 0 var(--bzz-input-label_floating-border-gap, 2px);
      margin: 0 calc(var(--bzz-input-label_floating-border-gap, 2px) * -1);
      @include transitions.transition(120ms, transitions.$ease-in, scale);
    }

    input::placeholder {
      visibility: hidden;
    }

    &[state-labelFloating=true] .bzz-input-label {
      //background-color: red;
      @include transitions.transition(80ms, transitions.$ease-out);

      label {
        scale: var(--bzz-input-label_floating-scale);
        @include transitions.transition(80ms, transitions.$ease-out, scale);
      }

      ~ .bzz-input-field input::placeholder {
        visibility: visible;
      }
    }

    &.--label-floating-always .bzz-input-label{
      transition: none;

      label {
        transition: none;
      }
    }
  }
}

